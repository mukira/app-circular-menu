<html>
  <link rel="stylesheet" href="style.css">

  <div class="controller">
    <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 100 100" enable-background="new 0 0 100 100" xml:space="preserve" id="menu" class="circular-menu">
      <circle class="center" cx="50" cy="50" r="15"/>
      <g class="option index-8">
        <path class="surface" d="M33.57715,42.65674c1.80566-4.03271,5.04688-7.27393,9.07959-9.07959L32.31641,8.6123 C21.68457,13.16064,13.16113,21.68408,8.6123,32.31543L33.57715,42.65674z"/>
        <path class="border" d="M7.23779,31.74609C11.94434,20.76172,20.7627,11.94385,31.74707,7.2373l-1.14844-2.77246 C18.88184,9.47607,9.47705,18.88086,4.46533,30.59766L7.23779,31.74609z"/>
        <g class="icon">
          <path d="M22.0083,20.48242l-2.57568,2.34814v7.60889l2.57568,2.34766l2.57568-2.34766v-7.60889L22.0083,20.48242z M23.96582,30.16602l-1.95752,1.78516l-1.95703-1.78516v-7.0625l1.95703-1.78516l1.95752,1.78516V30.16602z"/>
          <polyline points="23.16504,30.05957 22.72949,29.62012 22.0083,30.27832 21.2876,29.62012 21.2876,23.64893 22.0083,22.9917 22.72949,23.64893 22.74072,24.49316 23.34766,24.49316 23.34766,23.37646 22.0083,22.15527 20.66943,23.37646 20.66943,29.89355 22.0083,31.11426"/>
          <path d="M26.5542,20.48242l-2.57617,2.34814v7.60889l2.57617,2.34766l2.5752-2.34766v-7.60889L26.5542,20.48242z M28.51123,30.16602l-1.95703,1.78516l-1.95752-1.78516v-7.0625l1.95752-1.78516l1.95703,1.78516V30.16602z"/>
          <path d="M27.89307,23.37646l-1.33887-1.22119l-1.33936,1.22119v1.1167h0.60693l0.01123-0.84424l0.72119-0.65723 l0.72119,0.65723v2.1958l-2.0459,1.93164c-0.00439-0.00488-0.01025-0.00391-0.01465-0.01074v2.12793l1.33936,1.2207 l1.15674-1.05469l-0.43555-0.43945l-0.72119,0.6582l-0.72119-0.6582v-1.56348l2.0376-1.92383l-0.0083-0.00879 c0.01074-0.00684,0.02051-0.01221,0.03076-0.02246V23.37646z"/>
          <path d="M31.09961,20.48242l-2.57617,2.34814v7.60889l2.57617,2.34766l2.57568-2.34766v-7.60889 L31.09961,20.48242z M33.05664,30.16602l-1.95703,1.78516l-1.95752-1.78516v-7.0625l1.95752-1.78516l1.95703,1.78516V30.16602z" />
          <polyline points="32.25586,30.05957 31.8208,29.62012 31.09961,30.27832 30.37842,29.62012 30.37842,23.64893 31.09961,22.9917 31.8208,23.64893 31.83154,24.49316 32.43848,24.49316 32.43848,23.37646 31.09961,22.15527 29.76025,23.37646 29.76025,29.89355 31.09961,31.11426"/>
        </g>
      </g>
      <g class="option index-7">
        <path class="surface" d="M32,50c0-2.26416,0.43604-4.42188,1.19922-6.41748L8.2373,33.24268C6.15625,38.42334,5,44.0752,5,50 s1.15625,11.57715,3.23682,16.75781l24.9624-10.33984C32.43604,54.42188,32,52.26465,32,50z"/>
        <path class="border" d="M3.5,50c0-6.12354,1.20117-11.96826,3.36182-17.32715L4.09033,31.5249C1.7832,37.23779,0.5,43.47021,0.5,50 c0,6.5293,1.2832,12.7627,3.59033,18.47559l2.77148-1.14844C4.70117,61.96875,3.5,56.12305,3.5,50z"/>
        <path class="icon" d="M12.30273,56.03125c-1.02002,0-1.83643-0.19727-2.25049-0.68164 c-0.31543-0.37012-0.54785-1.04297,0.13477-2.15039c0.14502-0.23535,0.45215-0.30664,0.68799-0.16309 c0.23535,0.14551,0.30811,0.45312,0.16357,0.68848c-0.16602,0.26855-0.41553,0.75293-0.22559,0.97559 c0.60596,0.70996,4.37451,0.30469,8.14404-1.26562c2.56201-1.06836,3.68311-2.10547,3.64062-2.61719 c-0.08984-1.07617-3.45459-0.80762-5.91064-0.61328c-3.07715,0.24463-5.50586,0.43848-6.08057-0.82227 c-0.31934-0.69922-0.26709-1.42334,0.15039-2.09375c0.56055-0.90039,1.73047-1.63086,3.35449-2.13916 c-0.10645-0.94189,0.07129-1.74316,0.08398-1.79883c0.06201-0.26855,0.33057-0.43701,0.59814-0.375 c0.26904,0.06104,0.4375,0.32861,0.37646,0.59766c-0.00195,0.01074-0.13184,0.60596-0.08008,1.31006 c1.27246-0.29932,2.75928-0.48193,4.40479-0.52881c2.51562-0.05371,2.76318,1.07764,2.77979,1.43115 c0.04932,1.04248-1.37256,2.24805-4.10547,2.42969c-1.46484,0.09277-2.56641-0.27344-3.27148-1.10107 c-0.25635-0.30078-0.43701-0.63721-0.56201-0.98242c-1.49365,0.48389-2.37646,1.11768-2.72998,1.68555 c-0.23828,0.38281-0.26758,0.75879-0.08887,1.1499c0.28418,0.62354,3.17627,0.39355,5.09082,0.24072 c3.50439-0.28027,6.81348-0.5415,6.98633,1.52588c0.12354,1.47852-2.24414,2.78711-4.25195,3.62402 C17.26416,55.22363,14.3667,56.03125,12.30273,56.03125z M15.30127,45.86182c0.08643,0.2168,0.20361,0.42383,0.35986,0.60645 c0.48926,0.57129,1.30859,0.82373,2.44141,0.74854c2.26807-0.15039,3.18848-1.05127,3.17285-1.38428 c-0.00732-0.16504-0.4502-0.52051-1.75244-0.47852C17.83496,45.40186,16.43506,45.59082,15.30127,45.86182z"/>
      </g>
      <g class="option index-6">
        <path class="surface" d="M42.65625,66.42285c-4.03223-1.80566-7.27295-5.0459-9.0791-9.0791L8.6123,67.68457
          c4.54834,10.63184,13.07178,19.15527,23.70312,23.70312L42.65625,66.42285z"/>
        <path class="border" d="M31.74609,92.7627c-10.98438-4.70703-19.80176-13.52441-24.5083-24.50879l-2.77197,1.14844
          c5.01123,11.7168,14.41553,21.12109,26.13184,26.13184L31.74609,92.7627z"/>
        <path class="icon" d="M34.46484,77.30664c-0.01221-0.23145-0.10645-1.08301-0.50977-0.94922 c-0.38867,0.12988-0.71484,1.11035-1.09082,1.4043c-0.98145,0.76758-2.92139,1.14355-3.94434,0.29199 c1.71143-0.93262,3.03076-2.52148,2.99023-4.55469c-0.04053-2.00977-1.46484-3.21289-3.36279-3.48145 c1.49365-1.03027,1.11182-3.05566-0.73779-3.18555c-1.09326-0.08496-2.20557-0.00195-3.30225-0.00879 c-0.21826-0.00195-0.75635-0.13574-0.9458,0.05957c-0.42432,0.43555,0.68896,0.37598,0.79834,0.37402l-0.82715,5.64844 l1.54785,0.22754l0.40039-2.73438c1.604,0.07617,4.07617-0.03418,4.58545,1.94531c0.48682,1.89258-0.39404,3.71191-1.84863,4.90625 c-0.63525-0.9082-1.14062-1.91895-1.97021-2.67578c-0.83594-0.7627-1.82861-1.03613-2.92188-1.19531 c-1.83545-0.25586-4.34375-0.42285-5.43164,1.44141c-1.25781,2.09961,0.3418,4.32324,2.48584,4.7959 c2.36963,0.52148,5.03027-0.12305,7.24854-0.96777C29.15039,80.94531,34.63965,80.76758,34.46484,77.30664 C34.45703,77.16113,34.47949,77.59668,34.46484,77.30664z M28.29688,68.59375c0,1.51562-2.74805,1.3418-2.74805,1.3418 l0.39258-2.68066C25.94141,67.25488,28.29688,67.00977,28.29688,68.59375z M23.17627,78.88086 c-1.12109,0.125-3.33594,0.04102-3.33594-3.03809c0-1.7334,2.48584-1.90137,3.44482-1.76855 c2.10547,0.29102,2.85547,1.66016,3.94287,3.85645C27.22803,77.93066,26.03125,78.5625,23.17627,78.88086z"/>
      </g>
      <g class="option index-5">
        <path class="surface" d="M56.41797,66.80078C54.42188,67.56445,52.26367,68,50,68c-2.26416,0-4.42188-0.43555-6.41797-1.19922L33.24219,91.7627 C38.42334,93.84375,44.0752,95,50,95s11.57617-1.15625,16.75684-3.23633L56.41797,66.80078z"/>
        <path class="border" d="M67.32617,93.13867C61.96777,95.29883,56.12305,96.5,50,96.5c-6.12354,0-11.96826-1.20117-17.32764-3.36133 l-1.14746,2.77051C37.23779,98.2168,43.47021,99.5,50,99.5c6.5293,0,12.76172-1.2832,18.47461-3.58984L67.32617,93.13867z"/>
        <path class="icon" d="M53.86523,85.13477l1.07031-3.16992l-1.42676-4.12305h-8.15576l0.98047,2.85449 l-0.01953,5.37109l1.48682,3.15039h1.58545v-3.01172h1.46631l0.99121,3.01172h3.46777L53.86523,85.13477z M51.26855,83.11426 h-1.84326v-2.17969h1.86279l0.37695,1.08984L51.26855,83.11426z"/>
      </g>
      <g class="option index-4">
        <path class="surface" d="M66.42285,57.34473c-1.80664,4.03223-5.04688,7.27246-9.0791,9.07812L67.68359,91.3877
          c10.63184-4.54785,19.1543-13.07031,23.70312-23.70117L66.42285,57.34473z"/>
        <path class="border" d="M92.76172,68.25586C88.05469,79.23926,79.2373,88.05664,68.25293,92.7627l1.14844,2.77246
          c11.71582-5.01172,21.12012-14.41504,26.13281-26.13086L92.76172,68.25586z"/>
        <g class="icon">
          <polygon points="76.47363,70.63574 77.01465,72.91699 79.0752,72.91699 79.51953,70.63574    "/>
          <polygon points="72.92285,70.63574 69.87695,70.63574 70.32129,72.91699 72.38184,72.91699     "/>
          <polygon points="76.07227,78.5957 73.3252,78.5957 71.40918,78.5957 72.02637,81.24219 77.37012,81.24219 77.9873,78.5957"/>
          <polygon points="79.56836,70.38574 78.9248,69.20508 76.4375,69.20508 75.87695,69.20508 75.4707,67.48828 74.91406,67.48828 74.48438,67.48828 73.92578,67.48828 73.51953,69.20508 72.96094,69.20508 70.47266,69.20508 69.82812,70.38574 73.23926,70.38574 71.35156,78.3457 73.3252,78.3457 76.07227,78.3457 78.04492,78.3457 76.15723,70.38574"/>
        </g>
      </g>
      <g class="option index-3">
        <path class="surface" d="M68,50c0,2.26465-0.43652,4.42285-1.19922,6.41895L91.7627,66.75977C93.84375,61.57812,95,55.92578,95,50 c0-5.9248-1.15625-11.57617-3.2373-16.75684L66.80078,43.58252C67.56445,45.57812,68,47.73584,68,50z"/>
        <path class="border" d="M96.5,50c0,6.12402-1.20117,11.96973-3.3623,17.3291l2.77148,1.14746C98.2168,62.76367,99.5,56.53027,99.5,50 c0-6.5293-1.2832-12.76172-3.58984-18.47461l-2.77148,1.14795C95.29883,38.03223,96.5,43.87695,96.5,50z"/>
        <path class="icon" d="M90.81836,55.26172H77.5166l6.65137-11.52002L90.81836,55.26172z M79.52246,54.10254h9.29004 l-4.64453-8.04346L79.52246,54.10254z"/>
      </g>
      <g class="option index-2">
        <path class="surface" d="M57.34473,33.57715c4.03223,1.80664,7.27246,5.04736,9.07812,9.07959L91.3877,32.31592
          c-4.54883-10.63135-13.07129-19.1543-23.70215-23.70312L57.34473,33.57715z"/>
        <path class="border" d="M68.25488,7.23779c10.9834,4.70703,19.80176,13.5249,24.50781,24.50879l2.77246-1.14795
          C90.52344,18.88184,81.11914,9.47754,69.40332,4.46582L68.25488,7.23779z"/>
        <path class="icon" d="M73.47266,18.70312c-3.85938,0-7,3.10254-7,6.9165 c0,3.71387,2.93652,6.74854,6.68848,6.91113l0.8291,0.03564v-4.68701v-0.79443v-3.8501h0.00098v-1.44775h-2.01953 c-1.61328,0-2.92578,1.3125-2.92578,2.92676c0,1.61328,1.3125,2.92627,2.92578,2.92627v-1.59229 c-0.73535,0-1.33398-0.59863-1.33398-1.33398c0-0.73633,0.59863-1.33447,1.33398-1.33447h0.42773v7.4624 c-2.48926-0.48975-4.33594-2.64404-4.33594-5.22217c0-2.93604,2.42676-5.32422,5.40918-5.32422 c2.98047,0,5.4082,2.38818,5.4082,5.32422c0,1.18311-0.3877,2.30273-1.10156,3.22363L76.30957,27.25 c0.87891-0.50537,1.46973-1.45264,1.46973-2.53564c0-1.61426-1.31348-2.92725-2.92676-2.92725h-0.38281l-0.00195,1.44775l0,0 v0.14453h0.38477c0.73535,0,1.33398,0.59863,1.33398,1.33496c0,0.73486-0.59863,1.3335-1.33398,1.3335h-0.38477v1.5542 l3.27832,3.55518l0.58594-0.55811c1.38086-1.31641,2.14062-3.08447,2.14062-4.97949 C80.47266,21.80566,77.33203,18.70312,73.47266,18.70312z"/>
      </g>
      <g class="option index-1">
        <path class="surface" d="M43.58252,33.19922C45.57812,32.43604,47.73584,32,50,32c2.26465,0,4.42188,0.43604,6.41797,1.19922L66.75781,8.2373
          C61.57715,6.15625,55.9248,5,50,5S38.42383,6.15625,33.24316,8.23682L43.58252,33.19922z"/>
        <path class="border" d="M32.67383,6.86133C38.03223,4.70117,43.87695,3.5,50,3.5c6.12402,0,11.96875,1.20117,17.32812,3.36182l1.14746-2.771
          C62.7627,1.7832,56.53027,0.5,50,0.5c-6.5293,0-12.76172,1.28271-18.47412,3.58984L32.67383,6.86133z"/>
        <g class="icon">
          <polygon points="54.33105,18.90869 59.94629,16.16553 54.07812,16.16553 54.05957,16.19189 54.19434,17.53027"/>
          <polygon points="50.43555,21.47412 53.79883,16.21045 51.66406,15.23975 50.43555,14.68115"/>
          <polygon points="53.99902,17.68799 53.87793,16.47607 51.91113,19.55225 50.70605,21.43848 54.08105,19.0542 
            54.06445,19.03857 54.13086,19.00732"/>
          <polygon points="49.95508,21.43848 49.77734,21.16064 46.7832,16.47559 46.54492,18.85352 46.53027,19.00635 
            46.5957,19.03857 46.58008,19.0542"/>
          <polygon points="51.7168,15.03418 53.91309,16.03223 54.02637,15.85498 54.02637,15.86475 57.01562,11.39307 
            50.57617,14.51514"/>
          <polygon points="46.33008,18.90869 46.46484,17.56299 46.60156,16.19238 46.58398,16.16553 40.71484,16.16553"/>
          <polygon points="46.74902,16.03223 48.16016,15.39062 50.08496,14.51514 43.64453,11.39307 46.63477,15.86475 
            46.63574,15.85498"/>
          <polygon points="46.24219,19.09863 40.58008,16.33252 43.80664,21.55273"/>
          <polygon points="60.08301,16.33203 54.41895,19.09863 56.85449,21.55273"/>
          <polygon points="50.22559,21.47412 50.22559,14.68115 48.27734,15.56689 46.86328,16.21045 50.00977,21.13525"/>
        </g>
      </g>
    </svg>
    <p id="promptr" class="promptr"></p>
  </div>

  <iframe id="frame" width="100%" height="100%" scrolling="no" frameborder="no" src=""></iframe>

  <script charset="utf-8" src="//liwe.co/api/liwe.js"></script>
  <script src="menu.js"></script>
  <script>
    var myMenu = new CircularMenu('menu'),
        myLiwe = new Liwe({
          key: 'harD3r83tt3R7a5t3r5t0ngR',
          maxRemoteConn: 1
        });

    myLiwe.on('connect', function (info) {
      promptr('Grab your smartphone and go on ' + info.url);
    });

    myLiwe.on('error', function (error) {
      myPromptr.textContent = error;
    });

    myLiwe.on('new_remote', function (remote) {
      remote.setUI('touch', 'Press. Choose. Release.');

      // Activate the menu when a move start
      remote.on('touch_move_start', function () {
        myMenu.activate();
      });

      // Find the new position when a move is updated
      remote.on('touch_move_update', function (e) {
        var newSongIndex = myMenu.updatePosition(e.data.move.x, e.data.move.y);
        promptr(newSongIndex);
      });

      // Hide the menu when a move is over
      remote.on('touch_move_end', function () {
        var newSongIndex = myMenu.close();
        setSong(newSongIndex);
        promptr('Press. Choose. Release.');
      });

      // Reset the promptr on remote disconnection
      remote.on('disconnect', function (remote) {
        promptr('Grab your smartphone and go on ' + myLiwe.info.url);
      });

      promptr('Press. Choose. Release.');
    });

    // Starts the magic
    myLiwe.connect();


    // Soundcloud controls
    ///////////////////////////////////////////////////////////////////////////
    var currentIndex = 0,
      myPromptr = document.getElementById('promptr'),
      myFrame   = document.getElementById('frame'),
      frameUrls = [
        {title:'Lemaitre',          soundcloudId:'118816050'}, // Cut To Black (Instrumental) - Lemaitre
        {title:'Porter Robinson',   soundcloudId:'154777433'}, // Lionhearted - Porter Robinson
        {title:'Alex Metric',       soundcloudId:'15499741'},  // Head Straight - Alex Metric
        {title:'Justice',           soundcloudId:'18561928'},  // D.A.N.C.E. - Justice
        {title:'Ratatat',           soundcloudId:'152962953'}, // Nostrand - Ratatat
        {title:'Breakbot',          soundcloudId:'99534378'},  // You should know - Breakbot
        {title:'Sebastien Tellier', soundcloudId:'1541699'},   // La ritournelle - Sebastien Tellier
        {title:'C2C',               soundcloudId:'33553255'}   // Down the road - C2C
      ];

    function setSong (index) {
      if (!index || index === currentIndex) {
        return;
      }
      currentIndex = index;
      myFrame.src = 'https://w.soundcloud.com/player/?url=https%3A//api.soundcloud.com/tracks/' + frameUrls[currentIndex-1].soundcloudId + '&amp;auto_play=true&amp;hide_related=true&amp;show_comments=false&amp;show_user=true&amp;show_reposts=false&amp;visual=true';
    }

    function promptr (content) {
      if (typeof content === 'number') {
        content = content ? frameUrls[content-1].title : 'Drag your finger to select.';
      }
      else if (!content) {
        return;
      }
      myPromptr.textContent = content;
    }
  </script>
</html>